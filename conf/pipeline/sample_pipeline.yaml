# Sample Data Pipeline Configuration
# Save as: conf/pipelines/sample_pipeline.yaml

# Basic pipeline configuration
pipeline_name: "sample_full_pipeline"
description: "Sample pipeline demonstrating all features"
version: "1.0"

# Processing options
parallel_processing: true
n_workers: 4
output_dir: "data/pipelines/sample"
log_level: "INFO"

# Data sources configuration
data_sources:
  - name: "yahoo_finance_main"
    type: "yahoo_finance"
    symbols: ["AAPL", "GOOGL", "MSFT", "AMZN"]
    start_date: "2020-01-01"
    end_date: "2024-01-01"
    interval: "1d"

  - name: "yahoo_finance_crypto"
    type: "yahoo_finance"
    symbols: ["BTC-USD", "ETH-USD"]
    start_date: "2022-01-01"
    end_date: "2024-01-01"
    interval: "1d"

# Validation configuration
validation_config:
  enabled: true
  checks:
    - name: "missing_values"
      enabled: true
      threshold: 0.05 # Max 5% missing values
    - name: "data_quality"
      enabled: true
      threshold: 0.8 # Min 80% quality score
    - name: "completeness"
      enabled: true
      threshold: 0.95 # Min 95% completeness
    - name: "consistency"
      enabled: true
      threshold: 0.9 # Min 90% consistency

  fail_on_validation_error: false
  generate_report: true

# Data cleaning configuration
cleaning_config:
  enabled: true
  operations:
    - name: "remove_duplicates"
      enabled: true
    - name: "handle_missing_values"
      enabled: true
      strategy: "interpolate"
    - name: "outlier_detection"
      enabled: true
      method: "iqr"
      threshold: 2.0
    - name: "data_normalization"
      enabled: false

  preserve_raw_data: true
  generate_cleaning_report: true

# Feature engineering configuration
feature_config:
  enabled: true
  feature_sets:
    - name: "basic_technical"
      enabled: true
      features:
        - "sma_20"
        - "sma_50"
        - "rsi_14"
        - "macd"
        - "bollinger_bands"

    - name: "advanced_technical"
      enabled: true
      features:
        - "atr_14"
        - "stochastic"
        - "williams_r"
        - "cci_20"

    - name: "market_features"
      enabled: true
      features:
        - "volatility_20"
        - "returns_1d"
        - "returns_5d"
        - "volume_sma_20"

  feature_selection:
    enabled: true
    method: "variance_threshold"
    threshold: 0.01

  generate_feature_report: true

# Storage configuration
storage_config:
  format: "parquet"
  compression: "snappy"
  raw_data_dir: "data/pipelines/sample/raw"
  processed_data_dir: "data/pipelines/sample/processed"
  feature_data_dir: "data/pipelines/sample/features"
  backup_enabled: true
  backup_dir: "data/pipelines/sample/backup"

  partitioning:
    enabled: true
    partition_cols: ["symbol"]

  metadata:
    include_schema: true
    include_statistics: true

# Quality monitoring configuration
quality_config:
  enabled: true
  metrics:
    - name: "data_completeness"
      enabled: true
      threshold: 0.95
    - name: "data_freshness"
      enabled: true
      threshold_hours: 24
    - name: "schema_compliance"
      enabled: true
      threshold: 1.0
    - name: "data_consistency"
      enabled: true
      threshold: 0.9
    - name: "outlier_percentage"
      enabled: true
      threshold: 0.05

  alerting:
    enabled: true
    alert_on_failure: true
    alert_on_warning: true

  reporting:
    enabled: true
    generate_dashboard: true
    export_metrics: true

# Advanced options
advanced:
  retry_config:
    max_retries: 3
    retry_delay: 5
    exponential_backoff: true

  caching:
    enabled: true
    cache_dir: "data/pipelines/sample/cache"
    cache_ttl_hours: 24

  monitoring:
    performance_tracking: true
    resource_monitoring: true
    memory_limit_gb: 8
